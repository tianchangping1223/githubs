<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>canvas时钟</title>
	
</head>
<body>
	<canvas id="warp" width="800" height="500">此浏览器不支持canvas</canvas>
</body>
<script>
	var warp=document.getElementById('warp');
	var cvs=warp.getContext("2d");
	var plen=60;
	var wlen=50;
	var hlen=40;

	//中心原点
	cvs.strokeRect(0,0,cvs.width,cvs.height);
	cvs.beginPath();
	cvs.strokeStyle='red';
	cvs.fillStyle='red';
	cvs.arc(400,200,5,0,2*Math.PI,true);
	cvs.fill();
	cvs.closePath();

	//钟面
	cvs.beginPath();
	cvs.strokeStyle='#000';
	cvs.arc(400,200,150,0,2*Math.PI,true);
	cvs.stroke();
	cvs.closePath();
	cvs.beginPath();
	cvs.translate(400,200);
	cvs.rotate(-Math.PI/2);
	cvs.save();

	//点数
	for(var i=0;i<60;i++){
		if(i%5==0){
			cvs.fillRect(80,0,20,5);
			 cvs.fillText("" + (i / 5 == 0 ? 12 : i / 5), 70, 0); 


		}else{
			cvs.fillRect(90,0,10,2);
		}
		cvs.rotate(Math.PI/30);
	}
	cvs.closePath();
	
	//定时器
	var ts=0,tm=0,th=0;
	function auto(){
		cvs.restore();
		cvs.save();
		//秒
		cvs.rotate(ts*Math.PI/30);
	    cvs.clearRect(5, -1, plen+1, 2+2); 
	    cvs.strokeStyle='green';
		cvs.fillStyle='green';
		cvs.restore();
		cvs.save();

		//分
		cvs.rotate(tm*Math.PI/30);
	    cvs.clearRect(5, -1, wlen+1, 3+2); 
		cvs.restore();
		cvs.save();

		//时
	    cvs.rotate(th * Math.PI / 6); 
    	cvs.clearRect(5, -3, hlen+1, 4+2); 

    	//获取时间
    	 var time = new Date(); 
            var s = ts=time.getSeconds(); 
            var m = tm=time.getMinutes(); 
            var h = th=time.getHours();            
            cvs.restore(); 
            cvs.save(); 
            cvs.rotate(s * Math.PI / 30); 
            cvs.fillRect(5, 0, plen, 2); 
            cvs.restore(); cvs.save(); 
            cvs.rotate(m * Math.PI / 30); 
            cvs.fillRect(5, 0, wlen, 3); 
            cvs.restore(); cvs.save(); 
            cvs.rotate(h * Math.PI / 6); 
            cvs.fillRect(5, -2, hlen, 4); 
        } 
	
	auto();
	var timer=setInterval("auto();",1000)
</script>
</html>